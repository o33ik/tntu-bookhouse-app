<template name="createEditPublication">
    <div class="row edit-publication-wrapper">
        <form id="create-edit-publication-form">
            <div class="row">
                <div class="input-field col s12">
                    <input type="text" class="validate" id="title" required
                           value="{{publication.title}}">
                    <label for="title" class="{{#if publication.title}}active{{/if}}">
                        {{_ "bookTitle"}}
                    </label>
                </div>
            </div>

            <div class="row">
                <div class="input-field col s12">
                    <textarea rows="3" class="validate materialize-textarea"
                              id="description" value="{{publication.description}}"></textarea>
                    <label for="description" class="{{#if publication.description}}active{{/if}}">
                        {{_ "bookDescription"}}
                    </label>
                </div>
            </div>

            {{> typeSelect selectedType=publication.type}}

            <div class="row">
                <div class="input-field col s12">
                    <textarea rows="3" class="validate materialize-textarea"
                              id="content" value="{{publication.content}}"></textarea>
                    <label for="content" class="{{#if publication.content}}active{{/if}}">
                        {{_ "bookContent"}}
                    </label>
                </div>
            </div>

            {{> addAuthor
            addedAuthorsIds=addedAuthorsIds
            addAuthor=onAddAuthor
            removeAuthor=onRemoveAuthor}}

            <div class="row">
                <div class="input-field col s4">
                    <input type="text" class="validate" id="year" pattern="\s*\d{4}\s*"
                           required value="{{publication.year}}">
                    <label for="year" class="{{#if publication.year}}active{{/if}}">
                        {{_ "bookYear"}}
                    </label>
                </div>

                <div class="input-field col s4">
                    <input type="number" class="validate" id="pages-number" min="1"
                           required value="{{publication.pagesNumber}}">
                    <label for="pages-number" class="{{#if publication.pagesNumber}}active{{/if}}">
                        {{_ "bookPagesNumber"}}
                    </label>
                </div>

                <div class="input-field col s4">
                    <input type="text" class="validate" id="price"
                           pattern="^\s*\d+(\.\d{2})?\s*$" required
                           value="{{publication.price}}">
                    <label for="price" class="{{#if publication.price}}active{{/if}}">
                        {{_ "bookPrice"}}
                    </label>
                </div>
            </div>

            <div class="row">
                <div class="input-field col s4">
                    <input type="text" class="validate" id="isbn"
                           required value="{{publication.isbn}}">
                    <label for="isbn" class="{{#if publication.isbn}}active{{/if}}">
                        {{_ "isbn"}}
                    </label>
                </div>

                <div class="input-field col s4">
                    <input type="text" class="validate" id="udc"
                           required value="{{publication.udc}}">
                    <label for="udc" class="{{#if publication.udc}}active{{/if}}">
                        {{_ "udc"}}
                    </label>
                </div>

                <div class="input-field col s4">
                    <input type="text" class="validate" id="bbk"
                           required value="{{publication.bbk}}">
                    <label for="bbk" class="{{#if publication.bbk}}active{{/if}}">
                        {{_ "bbk"}}
                    </label>
                </div>
            </div>

            <div class="row">
                <div class="file-field input-field col
                {{#if imageBase64}}s10{{else}}s12{{/if}}">
                    <div class="btn">
                        <span>{{_ "bookImage"}}</span>
                        <input type="file" id="image" accept="image/*"
                               required="{{#unless imageBase64}}required{{/unless}}">
                    </div>
                    <div class="file-path-wrapper">
                        <input class="file-path validate" type="text">
                    </div>
                </div>
                {{#if imageBase64}}
                    <div class="col s2">
                        <img src="{{imageBase64}}" class="materialboxed image-preview">
                    </div>
                {{/if}}
            </div>

            <div class="row">
                <div class="file-field input-field col
                {{#if pdfDoc64}}s10{{else}}s12{{/if}}">
                    <div class="btn">
                        <span>{{_ "bookPdf"}}</span>
                        <input type="file" id="pdf" accept="application/pdf"
                               required="{{#unless pdfDoc64}}required{{/unless}}">
                    </div>
                    <div class="file-path-wrapper">
                        <input class="file-path validate" type="text">
                    </div>
                </div>
                {{#if pdfDoc64}}
                    <div class="col s2">
                        <a href="{{pdfDoc64}}" target="_blank">PDF</a>
                    </div>
                {{/if}}
            </div>

            <button type="submit" class="btn btn-default"
                    disabled="{{#unless allFieldsIsValid}}disabled{{/unless}}">Submit
            </button>
            <button type="button" class="btn btn-muted cancel-button">Cancel</button>
        </form>
    </div>
</template>