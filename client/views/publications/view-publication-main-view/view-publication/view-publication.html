<template name="viewPublication">
    <div class="row view-publication-wrapper">
        <div class="row">
            <div class="col s3">
                <img class="materialboxed publication-image" src="{{getPhotoUrlById publication.imageId}}">
            </div>
            <div class="col s9">
                {{#if canUser "editPublication"}}
                    <div class="settings-button-wrapper">
                        <a class="dropdown-button pointer" data-activates="settings-dropdown">
                            <i class="material-icons">settings</i>
                        </a>
                        <ul id="settings-dropdown" class="dropdown-content">
                            <li class="edit-publication-button"><a>{{_ "edit"}}</a></li>
                            <li class="change-publication-status-button">
                                <a>
                                    {{#if publication.isHidden}}
                                        {{_ "hidePublication"}}
                                    {{else}}
                                        {{_ "showPublication"}}
                                    {{/if}}
                                </a>
                            </li>
                        </ul>
                    </div>
                {{/if}}

                <div class="row no-margin-bottom">
                    <p class="no-margin-bottom publication-title pointer
                underline-hover">{{publication.title}}, {{publication.year}}</p>

                    <p class="no-margin-bottom">{{> bookAuthorsWithLinkForFilter
                    authorsIds=publication.authorsIds}}</p>
                </div>

                <div class="row no-margin-bottom">
                    <p class="no-margin-bottom">{{publication.pagesNumber}} {{_ "pages"}}</p>
                </div>

                {{#if publication.description}}
                    <div class="row no-margin-bottom">
                        <p class="no-margin-bottom">
                            {{publication.description}}
                        </p>
                    </div>
                {{/if}}

                <div class="row no-margin-bottom">
                    <p class="no-margin-bottom">
                        <a href="{{getPublPdfUrlFromId publication.pdfId}}"
                           target="_blank">{{_ "bookPdfView"}}</a>
                        (<a href="{{getPublPdfUrlFromId publication.pdfId}}"
                            target="_blank" download>{{_ "bookPdfDownload"}}</a>)
                    </p>
                </div>

                <div class="row">
                    <p>{{publication.pagesNumber}} {{_ "pages"}}</p>
                </div>

                {{#if publication.description}}
                    <div class="row">
                        <p>
                            {{publication.description}}
                        </p>
                    </div>
                {{/if}}
            </div>
        </div>

        <div class="row">
            <div class="col s12">

                <div class="row">
                    <h4 class="center-align">{{_ "bookContent"}}</h4>

                    {{#each contentLines}}
                        <p>
                            {{this}}
                        </p>
                    {{/each}}
                </div>

                <div class="row">
                    <div class="col s4 no-padding">
                        <p>{{_ "isbn"}} {{publication.isbn}}</p>
                    </div>
                    <div class="col s4">
                        <p>{{_ "bbk"}} {{publication.bbk}}</p>
                    </div>
                    <div class="col s4">
                        <p>{{_ "udc"}} {{publication.udc}}</p>
                    </div>
                </div>

                {{#unless publication.isHidden}}
                    <div class="row">
                        <button type="button" class="btn btn-flat buy-button">
                            <i class="material-icons left">shopping_cart</i>{{_ "buy"}}</button>
                        <a>{{_ "bookPrice"}} {{publication.price}} {{_ "UAH"}}</a>
                    </div>
                {{/unless}}
            </div>
        </div>
    </div>
</template>